{
  "SQLModel Model Definition": {
    "prefix": "sqlm-model",
    "body": [
      "from typing import Optional",
      "from sqlmodel import Field, SQLModel",
      "",
      "class ${1:Item}(SQLModel, table=True):",
      "    id: Optional[int] = Field(default=None, primary_key=True)",
      "    name: str = Field(index=True)",
      "    ${2:description}: Optional[str] = Field(default=None)"
    ],
    "description": "SQLModel Model Definition (sqlm-model)"
  },
  "SQLModel Async Session Dependency": {
    "prefix": "sqlm-session",
    "body": [
      "from typing import AsyncGenerator",
      "from sqlmodel.ext.asyncio.session import AsyncSession",
      "from ${1:your_db_module} import ${2:engine}",
      "",
      "async def get_session() -> AsyncGenerator[AsyncSession, None]:",
      "    async with AsyncSession(${2:engine}) as session:",
      "        yield session"
    ],
    "description": "SQLModel Async Session Dependency for FastAPI (sqlm-session)"
  },
  "CRUD Async Create (Strict)": {
    "prefix": "crud-create",
    "body": [
      "async def create_${1:item}(db: AsyncSession, payload: ${2:ItemCreate}):",
      "    ${1:item} = ${3:Item}.model_validate(payload)",
      "    db.add(${1:item})",
      "    await db.commit()",
      "    await db.refresh(${1:item})",
      "    return ${1:item}"
    ],
    "description": "CRUD Async Create Function (Strict Demo Style) (crud-create)"
  },
  "CRUD Async Get (Strict)": {
    "prefix": "crud-get",
    "body": [
      "async def get_${1:item}(db: AsyncSession, ${1:item}_id: int):",
      "    return await db.get(${2:Item}, ${1:item}_id)"
    ],
    "description": "CRUD Async Get One by ID (Strict Demo Style) (crud-get)"
  },
  "CRUD Async List (Strict)": {
    "prefix": "crud-list",
    "body": [
      "async def get_${1:items}(db: AsyncSession, skip: int = 0, limit: int = 100):",
      "    statement = select(${2:Item}).order_by(${2:Item}.id).offset(skip).limit(limit)",
      "    result = await db.exec(statement)",
      "    return result.all()"
    ],
    "description": "CRUD Async Get Multiple/List (Strict Demo Style) (crud-list)"
  },
  "CRUD Async Update (Strict, DRY)": {
    "prefix": "crud-update",
    "body": [
      "async def update_${1:item}(db: AsyncSession, ${1:item}_id: int, payload: ${2:ItemUpdate}):",
      "    ${1:item} = await get_${1:item}(db, ${1:item}_id)",
      "    if ${1:item} is None:",
      "        raise ValueError(\"${1:Item} not found\")",
      "    ",
      "    ${1:item}_data = payload.model_dump(exclude_unset=True)",
      "    for key, value in ${1:item}_data.items():",
      "        setattr(${1:item}, key, value)",
      "        ",
      "    db.add(${1:item})",
      "    await db.commit()",
      "    await db.refresh(${1:item})",
      "    return ${1:item}"
    ],
    "description": "CRUD Async Update (Uses get_item for DRY) (crud-update)"
  },
  "CRUD Async Delete (Strict, DRY)": {
    "prefix": "crud-delete",
    "body": [
      "async def delete_${1:item}(db: AsyncSession, ${1:item}_id: int):",
      "    ${1:item} = await get_${1:item}(db, ${1:item}_id)",
      "    if ${1:item} is None:",
      "        raise ValueError(\"${1:Item} not found\")",
      "    ",
      "    await db.delete(${1:item})",
      "    await db.commit()"
    ],
    "description": "CRUD Async Delete (Uses get_item for DRY) (crud-delete)"
  }
}
